{% extends "askIt/layout.html" %}
{% load static %}

{% block body %}

    
    All the unanswered questions for you will show here: (ONLY YOU CAN SEE THIS) <br><br><br><br>

    {% if questions %}
        {% for question in questions %}
            
            <div class="box">
                <div class="question" id = "question{{question.id}}">
                    {{question.content}} <br>
                    {{question.timestamp}} <br>
        
                    {% if question.poster == None %}
                        {{question.randomPoster}} <br>
                    {% else %}
                        {{question.poster}} <br>
                    {% endif %}
                    <button class="answer-btn" id="answer-btn{{question.id}}" > Answer </button>
                </div>

                <div>
                    {% if answers %}
                        {% for answer in answers %}
                            {% if answer.question == question %}
                                {{answer.content}} <br>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="answerQuestion" id="answerQuestion{{question.id}}" style="display: none;">
                    <form action="{% url 'access' user.username %}" method="POST" id="answer-form">
                        {% csrf_token %}
                        <div class="form-group">
                            <h6> Answer Question </h6>
                            <h8> {{question.content}} </h8>
                        </div>

                        <!-- Pass the question id -->
                        <input class="question-id" name="question-id" type="hidden" value="{{question.id}}">

                        <div class="form-group">
                            <textarea class="answer-content form-control" id="answer-content{{question.id}}" name="answerContent" required></textarea>
                        </div>
                        <div class="form-group">
                            <input class="answer-form-submit btn btn-primary" id="answer-form-submit{{question.id}}"  type="submit" value="Answer"/> 
                        </div>
                    </form>
                </div>
            </div>

        {% endfor %}
    {% else %}
       -- No more questions !
    {% endif %}
   

{% endblock %}


{% block script %}
    <script src="{% static 'askIt/main.js' %}" ></script>
{% endblock %}
